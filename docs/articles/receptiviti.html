<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="receptiviti">
<title>Get Started • receptiviti</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Started">
<meta property="og:description" content="receptiviti">
<meta property="og:image" content="https://receptiviti.github.io/receptiviti-r/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">receptiviti</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/receptiviti.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Receptiviti/receptiviti-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Receptiviti/receptiviti-r/blob/HEAD/vignettes/receptiviti.Rmd" class="external-link"><code>vignettes/receptiviti.Rmd</code></a></small>
      <div class="d-none name"><code>receptiviti.Rmd</code></div>
    </div>

    
    
<p><em>Built with R 4.2.1</em></p>
<hr>
<div class="section level2">
<h2 id="install-and-load">Install and Load<a class="anchor" aria-label="anchor" href="#install-and-load"></a>
</h2>
<p>First, download and install R for your system: <a href="https://cloud.r-project.org/bin/windows/base/" class="external-link">Windows</a> | <a href="https://cloud.r-project.org/bin/macosx/" class="external-link">Mac</a> | <a href="https://cloud.r-project.org/bin/linux/" class="external-link">Linux</a></p>
<p>You may also want to download and install <a href="https://www.rstudio.com/products/rstudio/download/#download" class="external-link">RStudio</a>
for a nice interface to R.</p>
<p>Then, from an R console, install the package; this only needs to be
done once:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"receptiviti"</span><span class="op">)</span></span></code></pre></div>
<p>Each time you start an R session, load the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://receptiviti.github.io/receptiviti-r/">receptiviti</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="set-up-api-credentials">Set Up API Credentials<a class="anchor" aria-label="anchor" href="#set-up-api-credentials"></a>
</h2>
<p>You can find your API key and secret on your <a href="https://dashboard.receptiviti.com" class="external-link">dashboard</a>.</p>
<p>You can set these credentials up in R permanently or temporarily:</p>
<div class="section level3">
<h3 id="permanent">Permanent<a class="anchor" aria-label="anchor" href="#permanent"></a>
</h3>
<p>Open or create your <code>~/.Renviron</code> file:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">edit_r_environ</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then add these environment variables with your key and secret:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="va">RECEPTIVITI_KEY</span><span class="op">=</span><span class="st">""</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="va">RECEPTIVITI_SECRET</span><span class="op">=</span><span class="st">""</span></span></code></pre></div>
<p>Then restart R for the changes to take effect.</p>
</div>
<div class="section level3">
<h3 id="temporary">Temporary<a class="anchor" aria-label="anchor" href="#temporary"></a>
</h3>
<p>Add your key and secret, and run at the start of each session:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span></span>
<span>  RECEPTIVITI_KEY <span class="op">=</span> <span class="st">""</span>,</span>
<span>  RECEPTIVITI_SECRET <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="confirm-credentials">Confirm Credentials<a class="anchor" aria-label="anchor" href="#confirm-credentials"></a>
</h3>
<p>Check that the API is reachable, and your credentials are
recognized:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/receptiviti.html">receptiviti_status</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Status: OK</span></span>
<span><span class="co">#&gt; Message: Hello there, World!</span></span></code></pre></div>
<p>If your credentials are not recognized, you’ll get a response like
this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/receptiviti.html">receptiviti_status</a></span><span class="op">(</span>key <span class="op">=</span> <span class="fl">123</span>, secret <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span>
<span><span class="co">#&gt; Status: ERROR</span></span>
<span><span class="co">#&gt; Message: 401 (1411): Unrecognized API key pair.</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="enter-your-text">Enter Your Text<a class="anchor" aria-label="anchor" href="#enter-your-text"></a>
</h2>
<div class="section level3">
<h3 id="loaded-text">Loaded Text<a class="anchor" aria-label="anchor" href="#loaded-text"></a>
</h3>
<p>If your texts are already in R, you can enter them directly.</p>
<p>These can be in a single character:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"texts to score"</span><span class="op">)</span></span></code></pre></div>
<p>Or a character vector:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text one"</span>, <span class="st">"text two"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Or from a <code>data.frame</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>texts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text a"</span>, <span class="st">"text b"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># directly</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">texts</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># by column name</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="va">data</span>, text_column <span class="op">=</span> <span class="st">"texts"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="text-in-files">Text in files<a class="anchor" aria-label="anchor" href="#text-in-files"></a>
</h3>
<p>You can enter paths to files containing separate texts in each
line:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># single</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"../files/file.txt"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># multiple</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"../files/file1.txt"</span>, <span class="st">"../files/file2.txt"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Or to a comma delimited file with a column containing text. Here, the
<code>text_column</code> argument specifies which column contains
text:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># single</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"../files/file.csv"</span>, text_column <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># multiple</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"../files/file1.csv"</span>, <span class="st">"../files/file2.csv"</span><span class="op">)</span>,</span>
<span>  text_column <span class="op">=</span> <span class="st">"text"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Or you can point to a directory containing text files:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"../files"</span><span class="op">)</span></span></code></pre></div>
<p>By default <code>.txt</code> files will be looked for, but you can
specify <code>.csv</code> files with the <code>file_type</code>
argument:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span></span>
<span>  <span class="st">"../files"</span>,</span>
<span>  text_column <span class="op">=</span> <span class="st">"text"</span>, file_type <span class="op">=</span> <span class="st">"csv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="use-results">Use Results<a class="anchor" aria-label="anchor" href="#use-results"></a>
</h2>
<div class="section level3">
<h3 id="returned-results">Returned Results<a class="anchor" aria-label="anchor" href="#returned-results"></a>
</h3>
<p>By default, results are returned as a <code>data.frame</code>, with a
row for each text, and columns for each framework variable:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"texts to score"</span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt;                          text_hash summary.word_count</span></span>
<span><span class="co">#&gt; 1 b771013281f84420644c3fd2289f3d9b                  3</span></span>
<span><span class="co">#&gt;   summary.words_per_sentence summary.sentence_count</span></span>
<span><span class="co">#&gt; 1                          3                      1</span></span></code></pre></div>
<p>Here, the first column (<code>text_hash</code>) is the MD5 hash of
the text, which identifies unique texts, and is stored in the main
cache.</p>
<p>The entered text can also be included with the
<code>return_text</code> argument:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"texts to score"</span>, return_text <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt;             text                        text_hash summary.word_count</span></span>
<span><span class="co">#&gt; 1 texts to score b771013281f84420644c3fd2289f3d9b                  3</span></span></code></pre></div>
<p>You can also select frameworks before they are all returned:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"texts to score"</span>, frameworks <span class="op">=</span> <span class="st">"liwc"</span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt;                          text_hash analytical_thinking clout authentic</span></span>
<span><span class="co">#&gt; 1 b771013281f84420644c3fd2289f3d9b                0.99   0.5      0.01</span></span></code></pre></div>
<p>By default, a single framework will have column names without the
framework name, but you can retain these with
<code>framework_prefix = TRUE</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span></span>
<span>  <span class="st">"texts to score"</span>,</span>
<span>  frameworks <span class="op">=</span> <span class="st">"liwc"</span>, framework_prefix <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt;                          text_hash liwc.analytical_thinking liwc.clout</span></span>
<span><span class="co">#&gt; 1 b771013281f84420644c3fd2289f3d9b                     0.99        0.5</span></span></code></pre></div>
<p>You can also have results returned as a list of frameworks, which
might make it easier to work with each separately:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"texts to score"</span>, as_list <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">$</span><span class="va">personality</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt;                          text_hash extraversion   active assertive</span></span>
<span><span class="co">#&gt; 1 b771013281f84420644c3fd2289f3d9b     40.60506 43.54977  32.54014</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="aligning-results">Aligning Results<a class="anchor" aria-label="anchor" href="#aligning-results"></a>
</h3>
<p>Results are returned in a way that aligns with the text you enter
originally, including any duplicates or invalid entries.</p>
<p>This means you can add the results object to original data:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text a"</span>, <span class="cn">NA</span>, <span class="st">""</span>, <span class="st">"text a"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">text</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine data and results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">results</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt;   id   text                        text_hash summary.word_count</span></span>
<span><span class="co">#&gt; 1  1 text a 468c24aa7dac18b7517469361676bffb                  2</span></span>
<span><span class="co">#&gt; 2  2   &lt;NA&gt;                             &lt;NA&gt;                 NA</span></span>
<span><span class="co">#&gt; 3  3                                    &lt;NA&gt;                 NA</span></span>
<span><span class="co">#&gt; 4  4 text a 468c24aa7dac18b7517469361676bffb                  2</span></span></code></pre></div>
<p>You can also provide a vector of unique IDs to be returned with
results so they can be merged with other data:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text a"</span>, <span class="st">"text b"</span><span class="op">)</span>, id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt;   id                        text_hash summary.word_count</span></span>
<span><span class="co">#&gt; 1  a 468c24aa7dac18b7517469361676bffb                  2</span></span>
<span><span class="co">#&gt; 2  b 0601f4c2ab4153a2fc4a1dc506c5fb9e                  2</span></span>
<span></span>
<span><span class="co"># merge with a new dataset</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a1"</span>, <span class="st">"b1"</span>, <span class="st">"a2"</span>, <span class="st">"b2"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">results</span>, by.x <span class="op">=</span> <span class="st">"type"</span>, by.y <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt;   type id                        text_hash summary.word_count</span></span>
<span><span class="co">#&gt; 1    a a1 468c24aa7dac18b7517469361676bffb                  2</span></span>
<span><span class="co">#&gt; 2    a a2 468c24aa7dac18b7517469361676bffb                  2</span></span>
<span><span class="co">#&gt; 3    b b1 0601f4c2ab4153a2fc4a1dc506c5fb9e                  2</span></span>
<span><span class="co">#&gt; 4    b b2 0601f4c2ab4153a2fc4a1dc506c5fb9e                  2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="saved-results">Saved Results<a class="anchor" aria-label="anchor" href="#saved-results"></a>
</h3>
<p>Results can also be saved to a <code>.csv</code> file:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span><span class="st">"texts to score"</span>, <span class="st">"../results.csv"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"../results.csv"</span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt;                          text_hash summary.word_count</span></span>
<span><span class="co">#&gt; 1 b771013281f84420644c3fd2289f3d9b                  3</span></span>
<span><span class="co">#&gt;   summary.words_per_sentence summary.sentence_count</span></span>
<span><span class="co">#&gt; 1                          3                      1</span></span></code></pre></div>
<p>And this can be compressed:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/receptiviti.html">receptiviti</a></span><span class="op">(</span></span>
<span>  <span class="st">"texts to score"</span>, <span class="st">"../results.csv.xz"</span>,</span>
<span>  compress <span class="op">=</span> <span class="cn">TRUE</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"../results.csv.xz"</span><span class="op">)</span></span>
<span><span class="va">results</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span></span>
<span><span class="co">#&gt;                          text_hash summary.word_count</span></span>
<span><span class="co">#&gt; 1 b771013281f84420644c3fd2289f3d9b                  3</span></span>
<span><span class="co">#&gt;   summary.words_per_sentence summary.sentence_count</span></span>
<span><span class="co">#&gt; 1                          3                      1</span></span></code></pre></div>
<p>In this case, the compressed file is 84% smaller.</p>
</div>
</div>
<div class="section level2">
<h2 id="preserving-results">Preserving Results<a class="anchor" aria-label="anchor" href="#preserving-results"></a>
</h2>
<p>The <code>receptiviti</code> function tries to avoid sending texts to
the API as much as possible:</p>
<ul>
<li>As part of the preparation process, it excludes duplicates and
invalid texts.</li>
<li>It checks the primary cache to see if any texts have already been
scored.
<ul>
<li>The primary cache is an Arrow database located by the
<code>cache</code> augment.</li>
<li>Its format is determined by <code>cache_format</code>.</li>
<li>You can skip checking it initially while still writing results to it
with <code>cache_overwrite = TRUE</code>.</li>
<li>It can be cleared with <code>clear_cache = TRUE</code>.</li>
</ul>
</li>
<li>It will check for any responses to previous, identical requests.
<ul>
<li>Responses are stored in <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code> as <code>.json</code>
files named by the bundle’s MD5 hash.</li>
<li>You can avoid using this cache with
<code>request_cache = FALSE</code>.</li>
<li>This cache is cleared when R is restarted.</li>
</ul>
</li>
</ul>
<p>If you want to make sure no texts are sent to the API, you can use
<code>make_request = FALSE</code>. This will use the primary and request
cache, but will fail if any texts are not found there.</p>
<p>If a call fails before results can be written to the cache or
returned, all received responses will still be in the request cache, but
those will be deleted if R is restarted. If you want to preserve these
but need to restart R, you can move the cached responses out of
<code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>, then replace them after restarting.</p>
</div>
<div class="section level2">
<h2 id="handling-big-data">Handling Big Data<a class="anchor" aria-label="anchor" href="#handling-big-data"></a>
</h2>
<p>The <code>receptiviti</code> function will handle splitting texts
into bundles, so the limit on how many texts you can process at once
will come down to your system’s amount of random access memory (RAM).
Several thousand texts should be fine, but getting into millions of
texts, you may not be able to have all of the results loaded at once. To
get around this, you can fully process subsets of your texts.</p>
<p>A benefit of processing more texts at once is that requests can be
parallelized, but this is more RAM intensive, and the primary cache is
updated less frequently (as it is updated only at the end of a complete
run).</p>
<p>You could also parallelize your own batches, but be sure to set
<code>cores</code> to <code>1</code> (to disable the function’s
parallelization) and <code>cache</code> to <code>FALSE</code> (to avoid
attempting to read from the cache while it is being written to by
another instance).</p>
<p>Disabling the cache is also more efficient, but you may want to
ensure you are not sending duplicate texts between calls. The function
handles duplicate texts within calls (only ever sending unique texts),
but depends on the cache to avoid sending duplicates between calls.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Receptiviti Inc., Kent English, Micah Iserman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
